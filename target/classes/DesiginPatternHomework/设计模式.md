# è½¯ä»¶è®¾è®¡ä¸ä½“ç³»ç»“æ„ - è®¾è®¡æ¨¡å¼ä½œä¸šæ±‡æ€»

**æ•™å¸ˆ**ï¼šå¼ å‡¯ã€é‚±æ™¨ã€ç‹ç£Š  
**å®Œæˆæ—¥æœŸ**ï¼š2025å¹´11æœˆ9æ—¥

---

## ç›®å½•

1. [å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰](#ä½œä¸šä¸€å•ä¾‹æ¨¡å¼çš„åº”ç”¨)
2. [å·¥å‚æ¨¡å¼ï¼ˆFactoryï¼‰](#ä½œä¸šäºŒå·¥å‚æ¨¡å¼çš„åº”ç”¨)
3. [æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰](#ä½œä¸šä¸‰æŠ½è±¡å·¥å‚æ¨¡å¼çš„åº”ç”¨)
4. [å»ºé€ è€…æ¨¡å¼ï¼ˆBuilderï¼‰](#ä½œä¸šå››å»ºé€ è€…æ¨¡å¼çš„åº”ç”¨)
5. [é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰](#ä½œä¸šäº”é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨)
6. [æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰](#ä½œä¸šå…­æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨)
7. [è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰](#ä½œä¸šä¸ƒè£…é¥°æ¨¡å¼çš„åº”ç”¨)
8. [å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰](#ä½œä¸šå…«å¤–è§‚æ¨¡å¼çš„åº”ç”¨)
9. [è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰](#ä½œä¸šä¹è§‚å¯Ÿè€…æ¨¡å¼çš„åº”ç”¨)
10. [ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰](#ä½œä¸šåç­–ç•¥æ¨¡å¼çš„åº”ç”¨)

---

## ä½œä¸šä¸€ï¼šå•ä¾‹æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

å¾ˆå¤šåº”ç”¨é¡¹ç›®éƒ½æœ‰é…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶é‡Œé¢å®šä¹‰ä¸€äº›åº”ç”¨éœ€è¦çš„å‚æ•°æ•°æ®ã€‚é€šå¸¸å®¢æˆ·ç«¯ä½¿ç”¨è¿™ä¸ªç±»æ˜¯é€šè¿‡ `new` ä¸€ä¸ª `AppConfig` çš„å®ä¾‹æ¥å¾—åˆ°ä¸€ä¸ªæ“ä½œé…ç½®æ–‡ä»¶å†…å®¹çš„å¯¹è±¡ã€‚å¦‚æœåœ¨ç³»ç»Ÿè¿è¡Œä¸­ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ä½¿ç”¨é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œç³»ç»Ÿä¸­ä¼šåŒæ—¶å­˜åœ¨å¤šä»½é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™ä¼šä¸¥é‡æµªè´¹å†…å­˜èµ„æºã€‚äº‹å®ä¸Šï¼Œå¯¹äº `AppConfig` ç±»ï¼Œåœ¨è¿è¡ŒæœŸé—´ï¼Œåªéœ€è¦ä¸€ä¸ªå¯¹è±¡å®ä¾‹å°±å¤Ÿäº†ã€‚

âœ… **ä»»åŠ¡**ï¼š

- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°è¯¥å•ä¾‹æ¨¡å¼
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**AppConfig.java - å•ä¾‹ç±»**

```java
package DesiginPatternHomework.Singleton;

import java.util.HashMap;
import java.util.Map;

public class AppConfig {
    // volatileå…³é”®å­—ç¡®ä¿å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¯è§æ€§å’Œæœ‰åºæ€§
    private static volatile AppConfig instance;
    private static final Object lockObject = new Object();

    // ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨å®ä¾‹åŒ–
    private AppConfig() {
        loadConfig();
    }

    private Map<String, String> configData;

    // åŒé‡æ£€æŸ¥é”å®šï¼ˆDouble-Checked Lockingï¼‰
    public static AppConfig getInstance() {
        if (instance == null) {
            synchronized (lockObject) {
                if (instance == null) {
                    instance = new AppConfig();
                }
            }
        }
        return instance;
    }

    private void loadConfig() {
        configData = new HashMap<>();
        configData.put("key1", "value1");
        configData.put("key2", "value2");
        configData.put("key3", "value3");
        System.out.println("é…ç½®æ–‡ä»¶å·²åŠ è½½");
    }

    public String getConfigValue(String key) {
        return configData.getOrDefault(key, "");
    }

    public void setConfigValue(String key, String value) {
        configData.put(key, value);
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Singleton;

public class Main {
    public static void main(String[] args) {
        AppConfig appConfig = AppConfig.getInstance();
        AppConfig appConfig2 = AppConfig.getInstance();
        System.out.println(appConfig == appConfig2);  // true
        System.out.println(appConfig);
        System.out.println(appConfig2);
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### å•ä¾‹æ¨¡å¼ç‰¹ç‚¹

1. **ç§æœ‰æ„é€ å‡½æ•°**ï¼šé˜²æ­¢å¤–éƒ¨é€šè¿‡ `new` åˆ›å»ºå®ä¾‹
2. **é™æ€å®ä¾‹å˜é‡**ï¼šä½¿ç”¨ `volatile` å…³é”®å­—ç¡®ä¿å¤šçº¿ç¨‹å¯è§æ€§
3. **åŒé‡æ£€æŸ¥é”å®š**ï¼šæ—¢ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œåˆæé«˜æ€§èƒ½
4. **å…¨å±€è®¿é—®ç‚¹**ï¼šé€šè¿‡ `getInstance()` æ–¹æ³•è·å–å”¯ä¸€å®ä¾‹

#### ä¼˜åŠ¿

- èŠ‚çœå†…å­˜èµ„æºï¼ˆåªåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼‰
- æä¾›å…¨å±€è®¿é—®ç‚¹
- çº¿ç¨‹å®‰å…¨

### 4. UMLç±»å›¾

```plantuml
@startuml Singleton Pattern

title å•ä¾‹æ¨¡å¼ - AppConfig

class AppConfig {
    - {static} instance: AppConfig
    - configData: Map<String, String>
    - AppConfig()
    + {static} getInstance(): AppConfig
    + getConfig(key: String): String
    + setConfig(key: String, value: String): void
}

note right of AppConfig::instance
  é™æ€å®ä¾‹ï¼Œä¿è¯å…¨å±€å”¯ä¸€
end note

note right of AppConfig::AppConfig
  ç§æœ‰æ„é€ å‡½æ•°ï¼Œ
  é˜²æ­¢å¤–éƒ¨å®ä¾‹åŒ–
end note

@enduml
```

---

## ä½œä¸šäºŒï¼šå·¥å‚æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡å·¥å‚æ¨¡å¼ï¼ˆFactoryï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

æœ‰ä¸€ä¸ª OEM åˆ¶é€ å•†ä»£ç†åš HP ç¬”è®°æœ¬ç”µè„‘ï¼ˆLaptopï¼‰ï¼Œåæ¥è¯¥åˆ¶é€ å•†å¾—åˆ°äº†æ›´å¤šå“ç‰Œè®¢å•ï¼šAcerã€Lenovoã€Dellã€‚è¯¥ OEM å•†å‘ç°ï¼Œå¦‚æœä¸€æ¬¡åŒæ—¶ç”Ÿäº§å¤šä¸ªå“ç‰Œçš„ç¬”è®°æœ¬ï¼Œä¸åˆ©äºç®¡ç†ã€‚

âœ… **ä»»åŠ¡**ï¼š

- åˆ©ç”¨å·¥å‚æ¨¡å¼æ”¹å–„è®¾è®¡
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°è¯¥ OEM åˆ¶é€ å•†çš„å·¥å‚æ¨¡å¼
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**Laptop.java - æŠ½è±¡äº§å“ç±»**

```java
package DesiginPatternHomework.Factory;

public abstract class Laptop {
    protected String brand;
    protected String model;
    
    public Laptop(String brand, String model) {
        this.brand = brand;
        this.model = model;
    }
    
    public abstract void displaySpecs();
    public abstract void start();
    public abstract void shutdown();
    
    public String getBrand() { return brand; }
    public String getModel() { return model; }
}
```

**å…·ä½“äº§å“ç±»ç¤ºä¾‹ - HPLaptop.java**

```java
package DesiginPatternHomework.Factory;

public class HPLaptop extends Laptop {
    public HPLaptop(String model) {
        super("HP", model);
    }
    
    @Override
    public void displaySpecs() {
        System.out.println("HPç¬”è®°æœ¬é…ç½®ï¼šIntel i7, 16GB RAM, 512GB SSD");
    }
    
    @Override
    public void start() {
        System.out.println("HPç¬”è®°æœ¬æ­£åœ¨å¯åŠ¨...");
    }
    
    @Override
    public void shutdown() {
        System.out.println("HPç¬”è®°æœ¬æ­£åœ¨å…³æœº...");
    }
}
```

**LaptopFactory.java - å·¥å‚ç±»**

```java
package DesiginPatternHomework.Factory;

public class LaptopFactory {
    public static Laptop createLaptop(String brand, String model) {
        switch (brand.toLowerCase()) {
            case "hp":
                return new HPLaptop(model);
            case "acer":
                return new AcerLaptop(model);
            case "lenovo":
                return new LenovoLaptop(model);
            case "dell":
                return new DellLaptop(model);
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„å“ç‰Œ: " + brand);
        }
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Factory;

public class Main {
    public static void main(String[] args) {
        System.out.println("=== OEMåˆ¶é€ å•†ç¬”è®°æœ¬å·¥å‚æ¨¡å¼æ¼”ç¤º ===\n");

        String[] brands = {"HP", "Acer", "Lenovo", "Dell"};
        String[] models = {"Pavilion 15", "Aspire 5", "ThinkPad X1", "XPS 15"};

        Laptop[] laptops = new Laptop[brands.length];

        for (int i = 0; i < brands.length; i++) {
            System.out.println("æ­£åœ¨ç”Ÿäº§ " + brands[i] + " " + models[i] + "...");
            laptops[i] = LaptopFactory.createLaptop(brands[i], models[i]);
            System.out.println("ç”Ÿäº§å®Œæˆï¼\n");
        }

        System.out.println("=== æµ‹è¯•æ‰€æœ‰ç¬”è®°æœ¬åŠŸèƒ½ ===\n");
        for (Laptop laptop : laptops) {
            System.out.println("--- " + laptop.getBrand() + " " + laptop.getModel() + " ---");
            laptop.displaySpecs();
            laptop.start();
            laptop.shutdown();
            System.out.println();
        }
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### å·¥å‚æ¨¡å¼ç‰¹ç‚¹

1. **è§£è€¦å¯¹è±¡åˆ›å»º**ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å…·ä½“äº§å“ç±»çš„åç§°
2. **æ˜“äºæ‰©å±•**ï¼šæ·»åŠ æ–°å“ç‰Œåªéœ€å¢åŠ æ–°çš„äº§å“ç±»
3. **é›†ä¸­ç®¡ç†**ï¼šå¯¹è±¡åˆ›å»ºé€»è¾‘é›†ä¸­åœ¨å·¥å‚ç±»ä¸­
4. **ç¬¦åˆå¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­

#### ä¼˜åŠ¿

- å®¢æˆ·ç«¯ä»£ç ä¸å…·ä½“äº§å“è§£è€¦
- ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“ç»´æŠ¤
- ä¾¿äºå•å…ƒæµ‹è¯•

### 4. UMLç±»å›¾

```plantuml
@startuml Factory Pattern

title å·¥å‚æ¨¡å¼ - OEMç¬”è®°æœ¬åˆ¶é€ 

interface Laptop {
    + produce(): void
}

class HPLaptop {
    + produce(): void
}

class AcerLaptop {
    + produce(): void
}

class LenovoLaptop {
    + produce(): void
}

class DellLaptop {
    + produce(): void
}

class LaptopFactory {
    + createLaptop(brand: String): Laptop
}

Laptop <|.. HPLaptop
Laptop <|.. AcerLaptop
Laptop <|.. LenovoLaptop
Laptop <|.. DellLaptop
LaptopFactory ..> Laptop : creates

note right of LaptopFactory
  æ ¹æ®å“ç‰Œå‚æ•°åˆ›å»º
  å¯¹åº”çš„ç¬”è®°æœ¬å¯¹è±¡
end note

@enduml
```

---

## ä½œä¸šä¸‰ï¼šæŠ½è±¡å·¥å‚æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

éº¦å½“åŠ³ï¼ˆMcDonaldsï¼‰å’Œè‚¯å¾·åŸºï¼ˆKFCï¼‰å¿«é¤åº—éƒ½ç»è¥æ±‰å ¡ï¼ˆHamburgï¼‰å’Œå¯ä¹ï¼ˆColaï¼‰ã€‚

âœ… **ä»»åŠ¡**ï¼š

- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°è¿™ä¸¤ä¸ªå¿«é¤åº—ç»è¥äº§å“çš„æŠ½è±¡å·¥å‚æ¨¡å¼
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**AbstractFastFoodFactory.java - æŠ½è±¡å·¥å‚**

```java
package DesiginPatternHomework.AbstractFactory;

public abstract class AbstractFastFoodFactory {
    public abstract Hamburger createHamburger();
    public abstract Cola createCola();
    public abstract String getStoreName();
}
```

**å…·ä½“å·¥å‚ - McDonaldsFactory.java**

```java
package DesiginPatternHomework.AbstractFactory;

public class McDonaldsFactory extends AbstractFastFoodFactory {
    @Override
    public Hamburger createHamburger() {
        return new McDonaldsHamburger();
    }

    @Override
    public Cola createCola() {
        return new McDonaldsCola();
    }

    @Override
    public String getStoreName() {
        return "éº¦å½“åŠ³";
    }
}
```

**å…·ä½“å·¥å‚ - KFCFactory.java**

```java
package DesiginPatternHomework.AbstractFactory;

public class KFCFactory extends AbstractFastFoodFactory {
    @Override
    public Hamburger createHamburger() {
        return new KFCHamburger();
    }

    @Override
    public Cola createCola() {
        return new KFCCola();
    }

    @Override
    public String getStoreName() {
        return "è‚¯å¾·åŸº";
    }
}
```

**FastFoodOrder.java - è®¢å•ç±»**

```java
package DesiginPatternHomework.AbstractFactory;

public class FastFoodOrder {
    private Hamburger hamburger;
    private Cola cola;
    private String storeName;

    public FastFoodOrder(AbstractFastFoodFactory factory) {
        this.storeName = factory.getStoreName();
        this.hamburger = factory.createHamburger();
        this.cola = factory.createCola();
    }

    public void placeOrder() {
        System.out.println("ã€" + storeName + "è®¢å•ã€‘");
        hamburger.prepare();
        cola.pour();
        System.out.println("è®¢å•å®Œæˆï¼\n");
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.AbstractFactory;

public class Main {
    public static void main(String[] args) {
        System.out.println("=== æŠ½è±¡å·¥å‚æ¨¡å¼æ¼”ç¤º - å¿«é¤åº—äº§å“ç³»åˆ— ===\n");

        // åˆ›å»ºéº¦å½“åŠ³è®¢å•
        System.out.println("å®¢æˆ·1æƒ³è¦éº¦å½“åŠ³å¥—é¤ï¼š");
        AbstractFastFoodFactory mcDonaldsFactory = new McDonaldsFactory();
        FastFoodOrder mcDonaldsOrder = new FastFoodOrder(mcDonaldsFactory);
        mcDonaldsOrder.placeOrder();

        // åˆ›å»ºè‚¯å¾·åŸºè®¢å•
        System.out.println("å®¢æˆ·2æƒ³è¦è‚¯å¾·åŸºå¥—é¤ï¼š");
        AbstractFastFoodFactory kfcFactory = new KFCFactory();
        FastFoodOrder kfcOrder = new FastFoodOrder(kfcFactory);
        kfcOrder.placeOrder();

        System.out.println("=== äº§å“æ—ä¸€è‡´æ€§æ¼”ç¤º ===");
        System.out.println("é€šè¿‡æŠ½è±¡å·¥å‚ç¡®ä¿ï¼š");
        System.out.println("- éº¦å½“åŠ³è®¢å•åªèƒ½åŒ…å«éº¦å½“åŠ³çš„æ±‰å ¡å’Œå¯ä¹");
        System.out.println("- è‚¯å¾·åŸºè®¢å•åªèƒ½åŒ…å«è‚¯å¾·åŸºçš„æ±‰å ¡å’Œå¯ä¹");
        System.out.println("- ä¸ä¼šå‡ºç°éº¦å½“åŠ³æ±‰å ¡é…è‚¯å¾·åŸºå¯ä¹çš„æ··åˆè®¢å•");
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### æŠ½è±¡å·¥å‚æ¨¡å¼ç‰¹ç‚¹

1. **äº§å“æ—æ¦‚å¿µ**ï¼šç¡®ä¿åŒä¸€å“ç‰Œçš„äº§å“ç³»åˆ—ä¸€è‡´æ€§
2. **æŠ½è±¡å·¥å‚æ¥å£**ï¼šå®šä¹‰åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³äº§å“çš„æ–¹æ³•
3. **å…·ä½“å·¥å‚å®ç°**ï¼šæ¯ä¸ªå“ç‰Œå¯¹åº”ä¸€ä¸ªå…·ä½“å·¥å‚
4. **æ˜“äºåˆ‡æ¢**ï¼šåˆ‡æ¢æ•´ä¸ªäº§å“ç³»åˆ—åªéœ€æ›´æ¢å·¥å‚

#### ä¼˜åŠ¿

- ä¿è¯äº§å“æ—çš„ä¸€è‡´æ€§
- éš”ç¦»å…·ä½“ç±»çš„ç”Ÿæˆ
- æ˜“äºäº¤æ¢äº§å“ç³»åˆ—
- æœ‰åˆ©äºäº§å“çš„ä¸€è‡´æ€§

### 4. UMLç±»å›¾

```plantuml
@startuml Abstract Factory Pattern

title æŠ½è±¡å·¥å‚æ¨¡å¼ - å¿«é¤åº—

interface Hamburger {
    + make(): void
}

interface Cola {
    + produce(): void
}

abstract class AbstractFastFoodFactory {
    + {abstract} createHamburger(): Hamburger
    + {abstract} createCola(): Cola
}

class McDonaldsHamburger {
    + make(): void
}

class McDonaldsCola {
    + produce(): void
}

class KFCHamburger {
    + make(): void
}

class KFCCola {
    + produce(): void
}

class McDonaldsFactory {
    + createHamburger(): Hamburger
    + createCola(): Cola
}

class KFCFactory {
    + createHamburger(): Hamburger
    + createCola(): Cola
}

class FastFoodOrder {
    - hamburger: Hamburger
    - cola: Cola
    + FastFoodOrder(factory: AbstractFastFoodFactory)
    + order(): void
}

Hamburger <|.. McDonaldsHamburger
Hamburger <|.. KFCHamburger
Cola <|.. McDonaldsCola
Cola <|.. KFCCola

AbstractFastFoodFactory <|-- McDonaldsFactory
AbstractFastFoodFactory <|-- KFCFactory

McDonaldsFactory ..> McDonaldsHamburger : creates
McDonaldsFactory ..> McDonaldsCola : creates
KFCFactory ..> KFCHamburger : creates
KFCFactory ..> KFCCola : creates

FastFoodOrder o-- Hamburger
FastFoodOrder o-- Cola
FastFoodOrder ..> AbstractFastFoodFactory : uses

@enduml
```

---

## ä½œä¸šå››ï¼šå»ºé€ è€…æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡å»ºé€ è€…æ¨¡å¼ï¼ˆBuilderï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹æ¨¡å¼ï¼Œä¸»è¦ç”¨äºåº”å¯¹é¡¹ç›®ä¸­ä¸€äº›**å¤æ‚å¯¹è±¡**çš„åˆ›å»ºå·¥ä½œï¼ˆå³å¯¹è±¡åŒ…å«å¤šä¸ªå­éƒ¨ä»¶ï¼‰ã€‚å®šä¹‰åœºæ™¯ï¼šæ±½è½¦ç”Ÿäº§å¿…é¡»åŒ…å« **è½¦è½®ï¼ˆWheelï¼‰**ã€**æ²¹ç®±ï¼ˆOilBoxï¼‰** å’Œ **è½¦èº«ï¼ˆBodyï¼‰**ã€‚

âœ… **ä»»åŠ¡**ï¼š

- åº”ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œæ„å»º BMW å“ç‰Œå’Œ Benz å“ç‰Œæ±½è½¦
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°è¯¥è®¾è®¡
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**Car.java - äº§å“ç±»**

```java
package DesiginPatternHomework.Builder;

public class Car {
    private String wheel;
    private String oilBox;
    private String body;

    public void setWheel(String wheel) { this.wheel = wheel; }
    public void setOilBox(String oilBox) { this.oilBox = oilBox; }
    public void setBody(String body) { this.body = body; }

    public void show() {
        System.out.println("è½¦è½®ï¼š" + wheel);
        System.out.println("æ²¹ç®±ï¼š" + oilBox);
        System.out.println("è½¦èº«ï¼š" + body);
    }
}
```

**CarBuilder.java - æŠ½è±¡å»ºé€ è€…**

```java
package DesiginPatternHomework.Builder;

public interface CarBuilder {
    void buildWheel();
    void buildOilBox();
    void buildBody();
    Car getResult();
}
```

**å…·ä½“å»ºé€ è€… - BMWCarBuilder.java**

```java
package DesiginPatternHomework.Builder;

public class BMWCarBuilder implements CarBuilder {
    private Car car = new Car();

    @Override
    public void buildWheel() {
        car.setWheel("BMWä¸“ç”¨è½®èƒï¼ˆç±³å…¶æ—ï¼‰");
    }

    @Override
    public void buildOilBox() {
        car.setOilBox("BMW 80Læ²¹ç®±");
    }

    @Override
    public void buildBody() {
        car.setBody("BMWè¿åŠ¨å‹è½¦èº«");
    }

    @Override
    public Car getResult() {
        return car;
    }
}
```

**Director.java - æŒ‡æŒ¥è€…**

```java
package DesiginPatternHomework.Builder;

public class Director {
    private CarBuilder builder;

    public Director(CarBuilder builder) {
        this.builder = builder;
    }

    public Car construct() {
        builder.buildWheel();
        builder.buildOilBox();
        builder.buildBody();
        return builder.getResult();
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Builder;

public class Main {
    public static void main(String[] args) {
        // æ„å»º BMW æ±½è½¦
        CarBuilder bmwBuilder = new BMWCarBuilder();
        Director bmwDirector = new Director(bmwBuilder);
        Car bmw = bmwDirector.construct();
        System.out.println("ã€BMW æ±½è½¦ã€‘");
        bmw.show();

        System.out.println();

        // æ„å»º Benz æ±½è½¦
        CarBuilder benzBuilder = new BenzCarBuilder();
        Director benzDirector = new Director(benzBuilder);
        Car benz = benzDirector.construct();
        System.out.println("ã€Benz æ±½è½¦ã€‘");
        benz.show();
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### å»ºé€ è€…æ¨¡å¼ç‰¹ç‚¹

1. **åˆ†æ­¥æ„å»º**ï¼šå°†å¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªæ­¥éª¤
2. **DirectoræŒ‡æŒ¥**ï¼šæ§åˆ¶æ„å»ºçš„é¡ºåºå’Œæµç¨‹
3. **ä¸åŒè¡¨ç¤º**ï¼šç›¸åŒçš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤º
4. **äº§å“ç‹¬ç«‹**ï¼šäº§å“ç±»ä¸ä¾èµ–äºå»ºé€ è¿‡ç¨‹

#### ä¼˜åŠ¿

- å°è£…æ€§å¥½ï¼Œåˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»
- æ‰©å±•æ€§å¥½ï¼Œå»ºé€ ç±»ä¹‹é—´ç‹¬ç«‹
- ä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©

### 4. UMLç±»å›¾

```plantuml
@startuml Builder Pattern

title å»ºé€ è€…æ¨¡å¼ - æ±½è½¦ç”Ÿäº§

class Car {
    - wheel: String
    - oilBox: String
    - body: String
    + setWheel(wheel: String): void
    + setOilBox(oilBox: String): void
    + setBody(body: String): void
    + show(): void
}

abstract class CarBuilder {
    # car: Car
    + CarBuilder()
    + {abstract} buildWheel(): void
    + {abstract} buildOilBox(): void
    + {abstract} buildBody(): void
    + getCar(): Car
}

class BMWCarBuilder {
    + buildWheel(): void
    + buildOilBox(): void
    + buildBody(): void
}

class BenzCarBuilder {
    + buildWheel(): void
    + buildOilBox(): void
    + buildBody(): void
}

class Director {
    - builder: CarBuilder
    + Director(builder: CarBuilder)
    + construct(): Car
}

CarBuilder <|-- BMWCarBuilder
CarBuilder <|-- BenzCarBuilder
CarBuilder o-- Car
Director o-- CarBuilder

note right of Director::construct
  æŒ‡å¯¼æ„å»ºè¿‡ç¨‹ï¼š
  1. buildWheel()
  2. buildOilBox()
  3. buildBody()
end note

@enduml
```

---

## ä½œä¸šäº”ï¼šé€‚é…å™¨æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

æŸç»˜å›¾ç³»ç»Ÿå·²è®¾è®¡äº† `Circle`ã€`Rectangle`ã€`Line` ç±»ï¼Œå‡æ”¯æŒ `Draw()` æ–¹æ³•ã€‚åˆä½œå›¢é˜Ÿå®ç°äº† `Angle` ç±»ï¼Œä½†å…¶ç»˜åˆ¶æ–¹æ³•ä¸º `DrawAngle()`ã€‚ç”¨æˆ·å¸Œæœ›**ç»Ÿä¸€è°ƒç”¨ `Draw()`**ï¼Œæ— éœ€è®°å¿†å¤šç§æ–¹æ³•åã€‚

âœ… **ä»»åŠ¡**ï¼š

- åº”ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œä½¿ `Angle` å¯¹è±¡ä¹Ÿèƒ½é€šè¿‡ `Draw()` è¢«è°ƒç”¨
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®Œå–„è®¾è®¡
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**ShapeSystem.java - å›¾å½¢ç³»ç»Ÿ**

```java
package DesiginPatternHomework.Adapter;

// ç›®æ ‡æ¥å£
interface Shape {
    void draw();
}

// ç³»ç»ŸåŸæœ‰å›¾å½¢ç±»
class Circle implements Shape {
    @Override
    public void draw() {
        System.out.println("ç»˜åˆ¶åœ†å½¢");
    }
}

class Rectangle implements Shape {
    @Override
    public void draw() {
        System.out.println("ç»˜åˆ¶çŸ©å½¢");
    }
}

class Line implements Shape {
    @Override
    public void draw() {
        System.out.println("ç»˜åˆ¶ç›´çº¿");
    }
}

// ç¬¬ä¸‰æ–¹æä¾›çš„ Angle ç±»ï¼ˆæ¥å£ä¸å…¼å®¹ï¼‰
class Angle {
    public void drawAngle() {
        System.out.println("ç»˜åˆ¶è§’åº¦ï¼ˆä½¿ç”¨ drawAngle æ–¹æ³•ï¼‰");
    }
}

// é€‚é…å™¨ï¼šä½¿ Angle å…¼å®¹ Shape æ¥å£
class AngleAdapter implements Shape {
    private Angle angle;

    public AngleAdapter(Angle angle) {
        this.angle = angle;
    }

    @Override
    public void draw() {
        angle.drawAngle();  // é€‚é…åˆ°ç»Ÿä¸€æ¥å£
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Adapter;

public class Main {
    public static void main(String[] args) {
        // åˆ›å»ºç»Ÿä¸€çš„ Shape æ•°ç»„ï¼ŒåŒ…å«é€‚é…åçš„ Angle
        Shape[] shapes = {
            new Circle(),
            new Rectangle(),
            new Line(),
            new AngleAdapter(new Angle())
        };

        System.out.println("ç”¨æˆ·ç»Ÿä¸€è°ƒç”¨ draw() æ–¹æ³•ï¼š");
        for (Shape shape : shapes) {
            shape.draw();
        }
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### é€‚é…å™¨æ¨¡å¼ç‰¹ç‚¹

1. **æ¥å£è½¬æ¢**ï¼šå°†ä¸å…¼å®¹çš„æ¥å£è½¬æ¢ä¸ºå®¢æˆ·ç«¯æœŸæœ›çš„æ¥å£
2. **å¯¹è±¡é€‚é…å™¨**ï¼šä½¿ç”¨ç»„åˆæ–¹å¼åŒ…è£…è¢«é€‚é…å¯¹è±¡
3. **é€æ˜è°ƒç”¨**ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“é€‚é…å™¨çš„å­˜åœ¨
4. **å¤ç”¨æ€§**ï¼šå¯ä»¥é‡ç”¨å·²å­˜åœ¨çš„ç±»

#### ä¼˜åŠ¿

- æé«˜ç±»çš„å¤ç”¨æ€§
- å¢åŠ ç±»çš„é€æ˜æ€§
- çµæ´»æ€§å¥½

### 4. UMLç±»å›¾

```plantuml
@startuml Adapter Pattern

title é€‚é…å™¨æ¨¡å¼ - ç»˜å›¾ç³»ç»Ÿ

interface Shape {
    + draw(): void
}

class Circle {
    + draw(): void
}

class Rectangle {
    + draw(): void
}

class Line {
    + draw(): void
}

class Angle {
    + drawAngle(): void
}

class AngleAdapter {
    - angle: Angle
    + AngleAdapter(angle: Angle)
    + draw(): void
}

class ShapeSystem {
    + drawShapes(shapes: List<Shape>): void
}

Shape <|.. Circle
Shape <|.. Rectangle
Shape <|.. Line
Shape <|.. AngleAdapter

AngleAdapter o-- Angle
ShapeSystem ..> Shape : uses

note right of AngleAdapter::draw
  é€‚é…å™¨å°† draw() 
  è½¬æ¢ä¸º drawAngle()
end note

@enduml
```

---

## ä½œä¸šå…­ï¼šæ¡¥æ¥æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨æ¡¥æ¥æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

æŸå’–å•¡åº—æä¾›ï¼š

- å’–å•¡æ¯å‹ï¼šå¤§æ¯ï¼ˆJorumCoffeeï¼‰ã€ä¸­æ¯ï¼ˆMediumCoffeeï¼‰ã€å°æ¯ï¼ˆSmallCoffeeï¼‰
- æ·»åŠ ç‰©ï¼šç‰›å¥¶ï¼ˆMilkï¼‰ã€ç³–ï¼ˆSugarï¼‰ã€æŸ æª¬ï¼ˆLemonï¼‰

éœ€æ”¯æŒçµæ´»ç»„åˆï¼Œå¦‚"å¤§æ¯+ç‰›å¥¶"ã€"å°æ¯+ç³–+æŸ æª¬"ç­‰ã€‚

âœ… **ä»»åŠ¡**ï¼š

- åº”ç”¨æ¡¥æ¥æ¨¡å¼å®ç°è¯¥è®¾è®¡
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**Coffee.java - æŠ½è±¡ç±»ï¼ˆæŠ½è±¡åŒ–ï¼‰**

```java
package DesiginPatternHomework.Bridge;

public abstract class Coffee {
    protected CoffeeAdditives additives;

    public Coffee(CoffeeAdditives additives) {
        this.additives = additives;
    }

    public abstract void makeCoffee();
}
```

**CoffeeAdditives.java - æ¥å£ï¼ˆå®ç°åŒ–ï¼‰**

```java
package DesiginPatternHomework.Bridge;

public interface CoffeeAdditives {
    String getDescription();
}
```

**å…·ä½“å’–å•¡ç±» - SmallCoffee.java**

```java
package DesiginPatternHomework.Bridge;

public class SmallCoffee extends Coffee {
    public SmallCoffee(CoffeeAdditives additives) {
        super(additives);
    }

    @Override
    public void makeCoffee() {
        System.out.println("å°æ¯å’–å•¡ + " + additives.getDescription());
    }
}
```

**å…·ä½“æ·»åŠ ç‰© - Milk.java**

```java
package DesiginPatternHomework.Bridge;

public class Milk implements CoffeeAdditives {
    @Override
    public String getDescription() {
        return "ç‰›å¥¶";
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Bridge;

public class Main {
    public static void main(String[] args) {
        System.out.println("=== å’–å•¡åº—èœå• ===");

        // åˆ›å»ºä¸åŒç»„åˆ
        Coffee smallWithMilk = new SmallCoffee(new Milk());
        Coffee mediumWithSugar = new MediumCoffee(new Sugar());
        Coffee jorumWithLemon = new JorumCoffee(new Lemon());

        // åˆ¶ä½œå’–å•¡
        smallWithMilk.makeCoffee();
        mediumWithSugar.makeCoffee();
        jorumWithLemon.makeCoffee();

        // æ¼”ç¤ºæ‰€æœ‰å¯èƒ½çš„ç»„åˆ
        System.out.println("\n=== æ‰€æœ‰ç»„åˆç¤ºä¾‹ ===");
        CoffeeAdditives[] additives = {new Milk(), new Sugar(), new Lemon()};
        
        for (CoffeeAdditives additive : additives) {
            new SmallCoffee(additive).makeCoffee();
            new MediumCoffee(additive).makeCoffee();
            new JorumCoffee(additive).makeCoffee();
        }
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### æ¡¥æ¥æ¨¡å¼ç‰¹ç‚¹

1. **åˆ†ç¦»æŠ½è±¡å’Œå®ç°**ï¼šå’–å•¡å¤§å°å’Œæ·»åŠ ç‰©ç‹¬ç«‹å˜åŒ–
2. **ç»„åˆä¼˜äºç»§æ‰¿**ï¼šé¿å…ç±»çˆ†ç‚¸é—®é¢˜
3. **çµæ´»æ‰©å±•**ï¼šå¯ä»¥ç‹¬ç«‹æ‰©å±•å’–å•¡ç±»å‹æˆ–æ·»åŠ ç‰©
4. **åŠ¨æ€ç»„åˆ**ï¼šè¿è¡Œæ—¶å¯ä»¥åŠ¨æ€é€‰æ‹©ç»„åˆ

#### ä¼˜åŠ¿

- é¿å…ç±»æ•°é‡çˆ†ç‚¸ï¼ˆ3Ã—3=9ç§ç»„åˆåªéœ€6ä¸ªç±»ï¼‰
- æé«˜å¯æ‰©å±•æ€§
- å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜

### 4. UMLç±»å›¾

```plantuml
@startuml Bridge Pattern

title æ¡¥æ¥æ¨¡å¼ - å’–å•¡åº—

abstract class Coffee {
    # additives: CoffeeAdditives
    + Coffee(additives: CoffeeAdditives)
    + {abstract} make(): void
}

class SmallCoffee {
    + make(): void
}

class MediumCoffee {
    + make(): void
}

class JorumCoffee {
    + make(): void
}

interface CoffeeAdditives {
    + add(): String
}

class Milk {
    + add(): String
}

class Sugar {
    + add(): String
}

class Lemon {
    + add(): String
}

Coffee <|-- SmallCoffee
Coffee <|-- MediumCoffee
Coffee <|-- JorumCoffee

Coffee o-- CoffeeAdditives

CoffeeAdditives <|.. Milk
CoffeeAdditives <|.. Sugar
CoffeeAdditives <|.. Lemon

note right of Coffee
  å’–å•¡æŠ½è±¡ç±»æŒæœ‰
  æ·»åŠ ç‰©æ¥å£å¼•ç”¨
end note

note bottom of CoffeeAdditives
  æ·»åŠ ç‰©æ¥å£å¯ä»¥
  çµæ´»ç»„åˆå’Œæ‰©å±•
end note

@enduml
```

---

## ä½œä¸šä¸ƒï¼šè£…é¥°æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨è£…é¥°æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

æ¸¸æˆåœºæ™¯ï¼š"å–œç¾Šç¾Šé€ƒå‘½"

- å–œç¾Šç¾Šåˆå§‹æœ€å¤š 5 æ¡å‘½
- ç°å¤ªç‹¼æ¯å’¬ä¸€æ¬¡ï¼Œå‡ 1 æ¡å‘½
- é€”ä¸­å¯åƒä¸‰ç§è‹¹æœï¼š
  - ğŸ **çº¢è‹¹æœ**ï¼šåŠ ä¿æŠ¤ç½©ï¼ˆè¢«å’¬ä¸æ‰å‘½ï¼‰
  - ğŸ **ç»¿è‹¹æœ**ï¼šåŠ é€Ÿå¥”è·‘
  - ğŸŒ **é»„è‹¹æœ**ï¼šå¯è¶Ÿæ°´è·‘ï¼ˆé€šè¿‡æ°´åŸŸï¼‰

ğŸ’¡ æç¤ºï¼šè‹¥ç”¨ç»§æ‰¿å®ç°ï¼Œéœ€æ´¾ç”Ÿ $2^3 = 8$ ä¸ªå­ç±»ï¼ˆå«ç©ºç»„åˆï¼‰ï¼Œç»´æŠ¤æˆæœ¬é«˜ï¼›è£…é¥°æ¨¡å¼å¯åŠ¨æ€å åŠ åŠŸèƒ½ã€‚

âœ… **ä»»åŠ¡**ï¼š

- åº”ç”¨è£…é¥°æ¨¡å¼å®ç°åŠŸèƒ½åŠ¨æ€æ‰©å±•
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**Sheep.java - æŠ½è±¡ç»„ä»¶**

```java
package DesiginPatternHomework.Decorator;

public interface Sheep {
    void run();
    int getLives();
    void loseLife();
}
```

**HappySheep.java - å…·ä½“ç»„ä»¶**

```java
package DesiginPatternHomework.Decorator;

public class HappySheep implements Sheep {
    private int lives = 5;

    @Override
    public void run() {
        System.out.println("å–œç¾Šç¾Šæ­£åœ¨å¥”è·‘...");
    }

    @Override
    public int getLives() {
        return lives;
    }

    @Override
    public void loseLife() {
        if (lives > 0) {
            lives--;
            System.out.println("è¢«å’¬äº†ï¼ç”Ÿå‘½ -1ï¼Œå‰©ä½™ï¼š" + lives);
        } else {
            System.out.println("ç”Ÿå‘½å·²è€—å°½ï¼");
        }
    }
}
```

**SheepDecorator.java - æŠ½è±¡è£…é¥°è€…**

```java
package DesiginPatternHomework.Decorator;

public abstract class SheepDecorator implements Sheep {
    protected Sheep sheep;

    public SheepDecorator(Sheep sheep) {
        this.sheep = sheep;
    }

    @Override
    public void run() {
        sheep.run();
    }

    @Override
    public int getLives() {
        return sheep.getLives();
    }

    @Override
    public void loseLife() {
        sheep.loseLife();
    }
}
```

**å…·ä½“è£…é¥°è€… - ShieldDecorator.javaï¼ˆçº¢è‹¹æœï¼‰**

```java
package DesiginPatternHomework.Decorator;

public class ShieldDecorator extends SheepDecorator {
    private boolean hasShield = true;

    public ShieldDecorator(Sheep sheep) {
        super(sheep);
    }

    @Override
    public void loseLife() {
        if (hasShield) {
            System.out.println("ä¿æŠ¤ç½©ç”Ÿæ•ˆï¼æ²¡æœ‰æ‰è¡€");
            hasShield = false;
        } else {
            sheep.loseLife();
        }
    }
}
```

**å…·ä½“è£…é¥°è€… - SpeedBoostDecorator.javaï¼ˆç»¿è‹¹æœï¼‰**

```java
package DesiginPatternHomework.Decorator;

public class SpeedBoostDecorator extends SheepDecorator {
    public SpeedBoostDecorator(Sheep sheep) {
        super(sheep);
    }

    @Override
    public void run() {
        sheep.run();
        System.out.println("â†’ åŠ é€Ÿæ•ˆæœï¼šè·‘å¾—æ›´å¿«äº†ï¼");
    }
}
```

**å…·ä½“è£…é¥°è€… - WaterWalkDecorator.javaï¼ˆé»„è‹¹æœï¼‰**

```java
package DesiginPatternHomework.Decorator;

public class WaterWalkDecorator extends SheepDecorator {
    public WaterWalkDecorator(Sheep sheep) {
        super(sheep);
    }

    @Override
    public void run() {
        sheep.run();
        System.out.println("â†’ è¶Ÿæ°´æ•ˆæœï¼šå¯ä»¥åœ¨æ°´é¢ä¸Šè·‘ï¼");
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Decorator;

public class Main {
    public static void main(String[] args) {
        // åˆå§‹å–œç¾Šç¾Š
        Sheep sheep = new HappySheep();
        sheep.run();
        sheep.loseLife();
        System.out.println("å½“å‰ç”Ÿå‘½ï¼š" + sheep.getLives());

        System.out.println("\n--- åƒäº†ä¸€ä¸ªçº¢è‹¹æœï¼ˆä¿æŠ¤ç½©ï¼‰ ---");
        sheep = new ShieldDecorator(sheep);
        
        System.out.println("\n--- åƒäº†ä¸€ä¸ªç»¿è‹¹æœï¼ˆåŠ é€Ÿï¼‰ ---");
        sheep = new SpeedBoostDecorator(sheep);
        
        System.out.println("\n--- åƒäº†ä¸€ä¸ªé»„è‹¹æœï¼ˆè¶Ÿæ°´ï¼‰ ---");
        sheep = new WaterWalkDecorator(sheep);
        
        sheep.loseLife();  // ä¿æŠ¤ç½©ç”Ÿæ•ˆ
        sheep.loseLife();  // ä¿æŠ¤ç½©å¤±æ•ˆï¼ŒçœŸæ­£æ‰£è¡€
        sheep.run();       // å±•ç¤ºæ‰€æœ‰å¢å¼ºæ•ˆæœ
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### è£…é¥°æ¨¡å¼ç‰¹ç‚¹

1. **åŠ¨æ€æ‰©å±•**ï¼šåœ¨è¿è¡Œæ—¶ä¸ºå¯¹è±¡æ·»åŠ åŠŸèƒ½
2. **é€æ˜æ€§**ï¼šè£…é¥°è€…å’Œè¢«è£…é¥°è€…å®ç°ç›¸åŒæ¥å£
3. **çµæ´»ç»„åˆ**ï¼šå¯ä»¥ä»»æ„ç»„åˆå¤šä¸ªè£…é¥°è€…
4. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªè£…é¥°è€…åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½

#### ä¼˜åŠ¿

- é¿å…ç±»çˆ†ç‚¸é—®é¢˜ï¼ˆ8ç§ç»„åˆåªéœ€4ä¸ªè£…é¥°ç±»ï¼‰
- æ¯”ç»§æ‰¿æ›´çµæ´»
- ç¬¦åˆå¼€é—­åŸåˆ™
- å¯ä»¥åŠ¨æ€æ·»åŠ /æ’¤é”€åŠŸèƒ½

### 4. UMLç±»å›¾

```plantuml
@startuml Decorator Pattern

title è£…é¥°æ¨¡å¼ - å–œç¾Šç¾Šé€ƒå‘½æ¸¸æˆ

interface Sheep {
    + getDescription(): String
    + getLives(): int
    + bite(): void
}

class HappySheep {
    - lives: int
    + HappySheep()
    + getDescription(): String
    + getLives(): int
    + bite(): void
}

abstract class SheepDecorator {
    # decoratedSheep: Sheep
    + SheepDecorator(sheep: Sheep)
    + getDescription(): String
    + getLives(): int
    + bite(): void
}

class ShieldDecorator {
    - hasShield: boolean
    + ShieldDecorator(sheep: Sheep)
    + getDescription(): String
    + bite(): void
}

class SpeedBoostDecorator {
    + SpeedBoostDecorator(sheep: Sheep)
    + getDescription(): String
    + run(): void
}

class WaterWalkDecorator {
    + WaterWalkDecorator(sheep: Sheep)
    + getDescription(): String
    + crossWater(): void
}

Sheep <|.. HappySheep
Sheep <|.. SheepDecorator
SheepDecorator <|-- ShieldDecorator
SheepDecorator <|-- SpeedBoostDecorator
SheepDecorator <|-- WaterWalkDecorator

SheepDecorator o-- Sheep

note right of ShieldDecorator
  çº¢è‹¹æœï¼šä¿æŠ¤ç½©
  è¢«å’¬ä¸æ‰å‘½
end note

note right of SpeedBoostDecorator
  ç»¿è‹¹æœï¼šåŠ é€Ÿå¥”è·‘
end note

note right of WaterWalkDecorator
  é»„è‹¹æœï¼šå¯è¶Ÿæ°´è·‘
end note

@enduml
```

---

## ä½œä¸šå…«ï¼šå¤–è§‚æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨å¤–è§‚æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

ä¿å®‰ç³»ç»Ÿç”±ä»¥ä¸‹è®¾å¤‡ç»„æˆï¼š

- å½•åƒæœºï¼ˆCameraï¼‰
- ç”µç¯ï¼ˆLightï¼‰
- çº¢å¤–çº¿æ„Ÿåº”å™¨ï¼ˆSensorï¼‰
- è­¦æŠ¥å™¨ï¼ˆAlarmï¼‰

æ“ä½œå‘˜éœ€é¢‘ç¹æ‰‹åŠ¨å¯åœå„è®¾å¤‡ï¼Œæ“ä½œç¹çã€‚

âœ… **ä»»åŠ¡**ï¼š

- åº”ç”¨å¤–è§‚æ¨¡å¼ï¼Œæä¾›ç»Ÿä¸€å…¥å£ï¼ˆå¦‚ `activateSecurity()`ã€`deactivateSecurity()`ï¼‰
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºæ”¹è¿›è®¾è®¡
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**SecurityFacade.java - å¤–è§‚ç±»**

```java
package DesiginPatternHomework.Facade;

public class SecurityFacade {
    private final Camera camera;
    private final Light light;
    private final Sensor sensor;
    private final Alarm alarm;

    public SecurityFacade() {
        this.camera = new Camera();
        this.light = new Light();
        this.sensor = new Sensor();
        this.alarm = new Alarm();
    }

    // ä¸€é”®å¯åŠ¨å®‰ä¿ç³»ç»Ÿ
    public void activate() {
        System.out.println("\nã€å¯åŠ¨å®‰ä¿ç³»ç»Ÿã€‘");
        light.turnOn();
        camera.turnOn();
        sensor.activate();
        alarm.activate();
        System.out.println("âœ… å®‰ä¿ç³»ç»Ÿå·²å…¨é¢å¯åŠ¨ï¼\n");
    }

    // ä¸€é”®å…³é—­å®‰ä¿ç³»ç»Ÿ
    public void deactivate() {
        System.out.println("\nã€å…³é—­å®‰ä¿ç³»ç»Ÿã€‘");
        alarm.deactivate();
        sensor.deactivate();
        camera.turnOff();
        light.turnOff();
        System.out.println("âœ… å®‰ä¿ç³»ç»Ÿå·²å®Œå…¨å…³é—­ã€‚\n");
    }
}

// å­ç³»ç»Ÿç±»ï¼šå½•åƒæœº
class Camera {
    public void turnOn() {
        System.out.println("ğŸ“¹ æ‘„åƒå¤´å·²å¼€å¯ï¼Œå¼€å§‹å½•åƒ...");
    }
    public void turnOff() {
        System.out.println("ğŸ“¹ æ‘„åƒå¤´å·²å…³é—­ï¼Œåœæ­¢å½•åƒã€‚");
    }
}

// å­ç³»ç»Ÿç±»ï¼šç”µç¯
class Light {
    public void turnOn() {
        System.out.println("ğŸ’¡ ç…§æ˜ç¯å·²å¼€å¯ï¼ŒåŒºåŸŸç…§äº®ã€‚");
    }
    public void turnOff() {
        System.out.println("ğŸ’¡ ç…§æ˜ç¯å·²å…³é—­ã€‚");
    }
}

// å­ç³»ç»Ÿç±»ï¼šçº¢å¤–æ„Ÿåº”å™¨
class Sensor {
    public void activate() {
        System.out.println("ğŸ“¡ çº¢å¤–æ„Ÿåº”å™¨å·²æ¿€æ´»ï¼Œè¿›å…¥ç›‘æ§æ¨¡å¼ã€‚");
    }
    public void deactivate() {
        System.out.println("ğŸ“¡ çº¢å¤–æ„Ÿåº”å™¨å·²åœç”¨ã€‚");
    }
}

// å­ç³»ç»Ÿç±»ï¼šè­¦æŠ¥å™¨
class Alarm {
    public void activate() {
        System.out.println("ğŸš¨ è­¦æŠ¥å™¨å·²å¾…å‘½ï¼Œå¼‚å¸¸å°†è§¦å‘è­¦æŠ¥ï¼");
    }
    public void deactivate() {
        System.out.println("ğŸš¨ è­¦æŠ¥å™¨å·²è§£é™¤ã€‚");
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Facade;

public class Main {
    public static void main(String[] args) {
        System.out.println("====== ä¿å®‰ç³»ç»Ÿæ§åˆ¶å° v1.0 ======");

        SecurityFacade security = new SecurityFacade();

        // å¯åŠ¨ç³»ç»Ÿ
        security.activate();

        // æ¨¡æ‹Ÿè¿è¡Œä¸€æ®µæ—¶é—´
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        // å…³é—­ç³»ç»Ÿ
        security.deactivate();

        System.out.println("ğŸ‘‹ ä¿å®‰æ“ä½œå®Œæˆã€‚");
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### å¤–è§‚æ¨¡å¼ç‰¹ç‚¹

1. **ç®€åŒ–æ¥å£**ï¼šä¸ºå¤æ‚å­ç³»ç»Ÿæä¾›ç®€å•æ¥å£
2. **è§£è€¦å®¢æˆ·ç«¯**ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦äº†è§£å­ç³»ç»Ÿçš„ç»†èŠ‚
3. **åˆ†å±‚ç»“æ„**ï¼šå®šä¹‰å­ç³»ç»Ÿçš„é«˜å±‚æ¥å£
4. **ä¸é™åˆ¶åŠŸèƒ½**ï¼šå®¢æˆ·ç«¯ä»å¯ç›´æ¥è®¿é—®å­ç³»ç»Ÿ

#### ä¼˜åŠ¿

- å‡å°‘ç³»ç»Ÿç›¸äº’ä¾èµ–
- æé«˜çµæ´»æ€§å’Œå®‰å…¨æ€§
- å¯¹å®¢æˆ·ç«¯å±è”½å­ç³»ç»Ÿç»„ä»¶
- å®ç°å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯çš„æ¾è€¦åˆ

### 4. UMLç±»å›¾

```plantuml
@startuml Facade Pattern

title å¤–è§‚æ¨¡å¼ - ä¿å®‰ç³»ç»Ÿ

class Camera {
    + start(): void
    + stop(): void
}

class Light {
    + turnOn(): void
    + turnOff(): void
}

class Sensor {
    + activate(): void
    + deactivate(): void
}

class Alarm {
    + enable(): void
    + disable(): void
}

class SecurityFacade {
    - camera: Camera
    - light: Light
    - sensor: Sensor
    - alarm: Alarm
    + SecurityFacade()
    + activateSecurity(): void
    + deactivateSecurity(): void
}

SecurityFacade o-- Camera
SecurityFacade o-- Light
SecurityFacade o-- Sensor
SecurityFacade o-- Alarm

note right of SecurityFacade::activateSecurity
  ç»Ÿä¸€å¯åŠ¨æ‰€æœ‰è®¾å¤‡ï¼š
  1. camera.start()
  2. light.turnOn()
  3. sensor.activate()
  4. alarm.enable()
end note

note right of SecurityFacade::deactivateSecurity
  ç»Ÿä¸€å…³é—­æ‰€æœ‰è®¾å¤‡ï¼š
  1. camera.stop()
  2. light.turnOff()
  3. sensor.deactivate()
  4. alarm.disable()
end note

@enduml
```

---

## ä½œä¸šä¹ï¼šè§‚å¯Ÿè€…æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡**è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰**çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

ç½‘ä¸Šå•†åº—ä¸­ï¼Œå•†å“ï¼ˆ`Product`ï¼‰çš„åç§°ï¼ˆ`name`ï¼‰ã€ä»·æ ¼ï¼ˆ`price`ï¼‰ç­‰å±æ€§å˜åŒ–æ—¶ï¼Œéœ€**è‡ªåŠ¨é€šçŸ¥æ³¨å†Œä¼šå‘˜**ï¼ˆå¦‚å‘é€é‚®ä»¶/ç«™å†…ä¿¡ï¼‰ï¼Œä½“ç°ç”µå•†ç‰¹è‰²ã€‚

âœ… **ä»»åŠ¡**ï¼š

- åº”ç”¨è§‚å¯Ÿè€…æ¨¡å¼å®ç°å•†å“å˜åŒ–é€šçŸ¥æœºåˆ¶
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾ï¼Œå¹¶æ ‡æ˜å„è§’è‰²ï¼ˆ`Subject`, `Observer`, `ConcreteSubject`, `ConcreteObserver`ï¼‰

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**Subject.java - ä¸»é¢˜æ¥å£**

```java
package DesiginPatternHomework.Observer;

interface Subject {
    void registerObserver(Observer o);
    void removeObserver(Observer o);
    void notifyObservers();
}
```

**Observer.java - è§‚å¯Ÿè€…æ¥å£**

```java
package DesiginPatternHomework.Observer;

interface Observer {
    void update(String productName, String field, Object oldValue, Object newValue);
}
```

**Product.java - å…·ä½“ä¸»é¢˜ï¼ˆå•†å“ï¼‰**

```java
package DesiginPatternHomework.Observer;

import java.util.ArrayList;
import java.util.List;

public class Product implements Subject {
    private String name;
    private double price;
    private List<Observer> observers;

    public Product(String name, double price) {
        this.name = name;
        this.price = price;
        this.observers = new ArrayList<>();
    }

    public String getName() { return name; }
    public double getPrice() { return price; }

    // Setter with notification
    public void setName(String newName) {
        if (!this.name.equals(newName)) {
            String oldName = this.name;
            this.name = newName;
            notifyObservers("name", oldName, newName);
        }
    }

    public void setPrice(double newPrice) {
        if (this.price != newPrice) {
            double oldPrice = this.price;
            this.price = newPrice;
            notifyObservers("price", oldPrice, newPrice);
        }
    }

    @Override
    public void registerObserver(Observer o) {
        observers.add(o);
        System.out.println("[ç³»ç»Ÿ] ä¼šå‘˜è®¢é˜…äº†å•†å“ [" + this.name + "] çš„å˜æ›´é€šçŸ¥");
    }

    @Override
    public void removeObserver(Observer o) {
        observers.remove(o);
        System.out.println("[ç³»ç»Ÿ] ä¼šå‘˜å–æ¶ˆè®¢é˜…å•†å“ [" + this.name + "]");
    }

    @Override
    public void notifyObservers() {
        // ç”±ç‰¹å®šé€šçŸ¥æ–¹æ³•å®ç°
    }

    private void notifyObservers(String fieldName, Object oldValue, Object newValue) {
        System.out.println("\n>>> å•†å“ [" + this.name + "] çš„ [" + fieldName + "] å‘ç”Ÿå˜æ›´ï¼š"
                + oldValue + " â†’ " + newValue);
        for (Observer o : observers) {
            o.update(this.name, fieldName, oldValue, newValue);
        }
    }

    @Override
    public String toString() {
        return "Product{name='" + name + "', price=" + price + "}";
    }
}
```

**Member.java - å…·ä½“è§‚å¯Ÿè€…ï¼ˆä¼šå‘˜ï¼‰**

```java
package DesiginPatternHomework.Observer;

public class Member implements Observer {
    private String name;

    public Member(String name) {
        this.name = name;
    }

    public String getName() { return name; }

    @Override
    public void update(String productName, String field, Object oldValue, Object newValue) {
        System.out.println("ğŸ“§ [é€šçŸ¥ä¼šå‘˜ " + name + "] å•†å“ [" + productName + "] çš„ " 
                + field + " å·²æ›´æ–°ï¼š" + oldValue + " â†’ " + newValue);
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Observer;

public class Main {
    public static void main(String[] args) {
        System.out.println("========== ç½‘ä¸Šå•†åº—è§‚å¯Ÿè€…æ¨¡å¼æ¼”ç¤º ==========\n");

        // åˆ›å»ºå•†å“
        Product phone = new Product("iPhone 16", 7999.0);
        System.out.println("âœ… åˆ›å»ºå•†å“ï¼š" + phone);

        // åˆ›å»ºä¼šå‘˜å¹¶è®¢é˜…
        Member alice = new Member("Alice");
        Member bob = new Member("Bob");
        Member charlie = new Member("Charlie");

        phone.registerObserver(alice);
        phone.registerObserver(bob);

        System.out.println();

        // ä¿®æ”¹å•†å“ä¿¡æ¯ â†’ è‡ªåŠ¨é€šçŸ¥
        phone.setPrice(7499.0);  // é™ä»·ä¿ƒé”€

        System.out.println();

        phone.setName("iPhone 16 Pro");  // å‡çº§ç‰ˆ

        System.out.println();

        // æ–°ä¼šå‘˜è®¢é˜…
        phone.registerObserver(charlie);

        System.out.println();

        phone.setPrice(8999.0);  // Pro ç‰ˆæ¶¨ä»·

        System.out.println("\n========== æ¼”ç¤ºç»“æŸ ==========");
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### è§‚å¯Ÿè€…æ¨¡å¼ç‰¹ç‚¹

1. **ä¸€å¯¹å¤šä¾èµ–**ï¼šä¸€ä¸ªä¸»é¢˜å¯ä»¥æœ‰å¤šä¸ªè§‚å¯Ÿè€…
2. **è‡ªåŠ¨é€šçŸ¥**ï¼šä¸»é¢˜çŠ¶æ€æ”¹å˜æ—¶è‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
3. **æ¾è€¦åˆ**ï¼šä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆ
4. **åŠ¨æ€è®¢é˜…**ï¼šè§‚å¯Ÿè€…å¯ä»¥éšæ—¶è®¢é˜…æˆ–å–æ¶ˆè®¢é˜…

#### ä¼˜åŠ¿

- æ”¯æŒå¹¿æ’­é€šä¿¡
- ç¬¦åˆå¼€é—­åŸåˆ™
- å»ºç«‹è§¦å‘æœºåˆ¶
- æŠ½è±¡è€¦åˆï¼Œæ˜“äºæ‰©å±•

### 4. UMLç±»å›¾

```plantuml
@startuml Observer Pattern

title è§‚å¯Ÿè€…æ¨¡å¼ - å•†å“å˜åŒ–é€šçŸ¥

interface Observer {
    + update(productName: String, oldPrice: double, newPrice: double): void
}

class Member {
    - name: String
    - email: String
    + Member(name: String, email: String)
    + update(productName: String, oldPrice: double, newPrice: double): void
}

class Product {
    - name: String
    - price: double
    - observers: List<Observer>
    + Product(name: String, price: double)
    + attach(observer: Observer): void
    + detach(observer: Observer): void
    + notifyObservers(oldPrice: double): void
    + setPrice(newPrice: double): void
    + setName(newName: String): void
    + getName(): String
    + getPrice(): double
}

Observer <|.. Member
Product o-- Observer

note right of Product
  Subject (ä¸»é¢˜)
  ç®¡ç†è§‚å¯Ÿè€…åˆ—è¡¨
  å½“çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥è§‚å¯Ÿè€…
end note

note right of Member
  ConcreteObserver (å…·ä½“è§‚å¯Ÿè€…)
  å®ç°updateæ–¹æ³•
  æ¥æ”¶å•†å“å˜åŒ–é€šçŸ¥
end note

note bottom of Product::notifyObservers
  éå†æ‰€æœ‰è§‚å¯Ÿè€…
  è°ƒç”¨å…¶updateæ–¹æ³•
end note

@enduml
```

---

## ä½œä¸šåï¼šç­–ç•¥æ¨¡å¼çš„åº”ç”¨

### 1. é¢˜ç›®è¦æ±‚

#### ç›®çš„

1. æŒæ¡ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰çš„ç‰¹ç‚¹
2. åˆ†æå…·ä½“é—®é¢˜ï¼Œä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œè®¾è®¡

#### å†…å®¹å’Œè¦æ±‚

å›¾ä¹¦é”€å”®ç³»ç»Ÿä¸­,ä¸åŒç±»åˆ«å›¾ä¹¦æœ‰ä¸åŒæŠ˜æ‰£ï¼š

- è®¡ç®—æœºç±»å›¾ä¹¦ï¼š7 æŠ˜
- è‹±è¯­ç±»å›¾ä¹¦ï¼š6 æŠ˜
- å°è¯´ç±»å›¾ä¹¦ï¼š8 æŠ˜
- å…¶ä»–ç±»å›¾ä¹¦ï¼šæ— æŠ˜æ‰£ï¼ˆåŸä»·ï¼‰

éœ€æ”¯æŒçµæ´»æ‰©å±•æ–°æŠ˜æ‰£ç­–ç•¥ã€‚

âœ… **ä»»åŠ¡**ï¼š

- åº”ç”¨ç­–ç•¥æ¨¡å¼å®ç°æŠ˜æ‰£è®¡ç®—
- ç”¨ Java æ§åˆ¶å°åº”ç”¨ç¨‹åºå®ç°
- ç»˜åˆ¶è¯¥æ¨¡å¼çš„ UML ç±»å›¾

### 2. è§£å†³æ–¹æ¡ˆ

#### æ ¸å¿ƒä»£ç å®ç°

**DiscountStrategy.java - ç­–ç•¥æ¥å£**

```java
package DesiginPatternHomework.Strategy;

public interface DiscountStrategy {
    double calculate(double price);
}
```

**å…·ä½“ç­–ç•¥ç±» - ComputerDiscount.java**

```java
package DesiginPatternHomework.Strategy;

public class ComputerDiscount implements DiscountStrategy {
    @Override
    public double calculate(double price) {
        return price * 0.7;  // 7æŠ˜
    }
}
```

**å…·ä½“ç­–ç•¥ç±» - EnglishDiscount.java**

```java
package DesiginPatternHomework.Strategy;

public class EnglishDiscount implements DiscountStrategy {
    @Override
    public double calculate(double price) {
        return price * 0.6;  // 6æŠ˜
    }
}
```

**å…·ä½“ç­–ç•¥ç±» - NovelDiscount.java**

```java
package DesiginPatternHomework.Strategy;

public class NovelDiscount implements DiscountStrategy {
    @Override
    public double calculate(double price) {
        return price * 0.8;  // 8æŠ˜
    }
}
```

**å…·ä½“ç­–ç•¥ç±» - NoDiscount.java**

```java
package DesiginPatternHomework.Strategy;

public class NoDiscount implements DiscountStrategy {
    @Override
    public double calculate(double price) {
        return price;  // æ— æŠ˜æ‰£
    }
}
```

**Book.java - ä¸Šä¸‹æ–‡ç±»**

```java
package DesiginPatternHomework.Strategy;

public class Book {
    private String title;
    private double price;       // åŸä»·
    private String type;        // "CS", "EN", "NOVEL" ç­‰
    private DiscountStrategy strategy;

    public Book(String title, double price, String type) {
        this.title = title;
        this.price = price;
        this.type = type;
        this.strategy = new NoDiscount();  // é»˜è®¤æ— æŠ˜æ‰£
    }

    // åŠ¨æ€è®¾ç½®ç­–ç•¥
    public void setDiscountStrategy(DiscountStrategy strategy) {
        this.strategy = strategy;
    }

    // è®¡ç®—æŠ˜åä»·
    public double getDiscountedPrice() {
        return strategy.calculate(price);
    }

    // æ ¹æ®ç±»å‹è‡ªåŠ¨åŒ¹é…ç­–ç•¥
    public void applyStrategyByType() {
        switch (type.toUpperCase()) {
            case "CS":
                setDiscountStrategy(new ComputerDiscount());
                break;
            case "EN":
                setDiscountStrategy(new EnglishDiscount());
                break;
            case "NOVEL":
                setDiscountStrategy(new NovelDiscount());
                break;
            default:
                setDiscountStrategy(new NoDiscount());
        }
    }

    @Override
    public String toString() {
        return String.format("ã€Š%sã€‹ | ç±»å‹: %s | åŸä»·: Â¥%.2f | æŠ˜åä»·: Â¥%.2f",
                title, type, price, getDiscountedPrice());
    }
}
```

**Main.java - æµ‹è¯•ç±»**

```java
package DesiginPatternHomework.Strategy;

import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.println("=== å›¾ä¹¦æŠ˜æ‰£ç³»ç»Ÿï¼ˆç­–ç•¥æ¨¡å¼ï¼‰ ===");

        // åˆ›å»ºå‡ æœ¬ä¹¦
        Book[] books = {
            new Book("Javaç¼–ç¨‹æ€æƒ³", 120.0, "CS"),
            new Book("æ–°æ¦‚å¿µè‹±è¯­", 80.0, "EN"),
            new Book("ä¸‰ä½“", 59.9, "NOVEL"),
            new Book("ç»æµå­¦åŸç†", 99.0, "OTHER")
        };

        // ä¸ºæ¯æœ¬ä¹¦æ ¹æ®ç±»å‹è‡ªåŠ¨é…ç½®æŠ˜æ‰£ç­–ç•¥
        for (Book book : books) {
            book.applyStrategyByType();
            System.out.println(book);
        }

        System.out.println("\n--- åŠ¨æ€åˆ‡æ¢ç­–ç•¥æ¼”ç¤º ---");
        System.out.print("é€‰æ‹©ä¸€æœ¬ä¹¦ï¼ˆè¾“å…¥åºå· 0~" + (books.length - 1) + "ï¼‰: ");
        int idx = sc.nextInt();
        
        if (idx >= 0 && idx < books.length) {
            Book selected = books[idx];
            System.out.println("å½“å‰: " + selected);

            System.out.println("å¯é€‰ç­–ç•¥ï¼š1-è®¡ç®—æœºç±»(7æŠ˜) 2-è‹±è¯­ç±»(6æŠ˜) 3-å°è¯´ç±»(8æŠ˜) 4-æ— æŠ˜æ‰£");
            System.out.print("è¯·é€‰æ‹©æ–°ç­–ç•¥ç¼–å·: ");
            int choice = sc.nextInt();

            DiscountStrategy newStrategy = switch (choice) {
                case 1 -> new ComputerDiscount();
                case 2 -> new EnglishDiscount();
                case 3 -> new NovelDiscount();
                default -> new NoDiscount();
            };

            selected.setDiscountStrategy(newStrategy);
            System.out.println("ç­–ç•¥å·²æ›´æ–° â†’ " + selected);
        }

        sc.close();
    }
}
```

### 3. è®¾è®¡è¦ç‚¹

#### ç­–ç•¥æ¨¡å¼ç‰¹ç‚¹

1. **ç®—æ³•æ—å°è£…**ï¼šå°†ä¸åŒæŠ˜æ‰£ç®—æ³•å°è£…æˆç‹¬ç«‹çš„ç­–ç•¥ç±»
2. **å¯äº’æ¢**ï¼šç­–ç•¥å¯ä»¥è‡ªç”±åˆ‡æ¢
3. **æ¶ˆé™¤æ¡ä»¶è¯­å¥**ï¼šé¿å…å¤§é‡çš„ if-else æˆ– switch
4. **æ˜“äºæ‰©å±•**ï¼šæ·»åŠ æ–°ç­–ç•¥ä¸å½±å“ç°æœ‰ä»£ç 

#### ä¼˜åŠ¿

- ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢
- é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­
- æ‰©å±•æ€§è‰¯å¥½
- ç¬¦åˆå¼€é—­åŸåˆ™

### 4. UMLç±»å›¾

```plantuml
@startuml Strategy Pattern

title ç­–ç•¥æ¨¡å¼ - å›¾ä¹¦æŠ˜æ‰£ç³»ç»Ÿ

interface DiscountStrategy {
    + calculatePrice(originalPrice: double): double
}

class ComputerDiscount {
    + calculatePrice(originalPrice: double): double
}

class EnglishDiscount {
    + calculatePrice(originalPrice: double): double
}

class NovelDiscount {
    + calculatePrice(originalPrice: double): double
}

class NoDiscount {
    + calculatePrice(originalPrice: double): double
}

class Book {
    - title: String
    - originalPrice: double
    - discountStrategy: DiscountStrategy
    + Book(title: String, price: double, strategy: DiscountStrategy)
    + setDiscountStrategy(strategy: DiscountStrategy): void
    + getFinalPrice(): double
    + getTitle(): String
}

DiscountStrategy <|.. ComputerDiscount
DiscountStrategy <|.. EnglishDiscount
DiscountStrategy <|.. NovelDiscount
DiscountStrategy <|.. NoDiscount

Book o-- DiscountStrategy

note right of ComputerDiscount
  è®¡ç®—æœºç±»å›¾ä¹¦ï¼š7æŠ˜
end note

note right of EnglishDiscount
  è‹±è¯­ç±»å›¾ä¹¦ï¼š6æŠ˜
end note

note right of NoDiscount
  å…¶ä»–ç±»å›¾ä¹¦ï¼šæ— æŠ˜æ‰£
end note

note right of Book
  Context (ä¸Šä¸‹æ–‡)
  æŒæœ‰ç­–ç•¥æ¥å£å¼•ç”¨
  å¯åŠ¨æ€åˆ‡æ¢ç­–ç•¥
end note

@enduml
```

---

## æ€»ç»“

æœ¬æ¬¡ä½œä¸šæ¶µç›–äº† **10 ç§ç»å…¸è®¾è®¡æ¨¡å¼**ï¼Œåˆ†ä¸ºä¸‰å¤§ç±»ï¼š

### åˆ›å»ºå‹æ¨¡å¼ï¼ˆ5ç§ï¼‰

1. **å•ä¾‹æ¨¡å¼**ï¼šç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆé…ç½®ç®¡ç†ï¼‰
2. **å·¥å‚æ¨¡å¼**ï¼šå®šä¹‰åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼ˆç¬”è®°æœ¬åˆ¶é€ ï¼‰
3. **æŠ½è±¡å·¥å‚æ¨¡å¼**ï¼šåˆ›å»ºç›¸å…³å¯¹è±¡æ—ï¼ˆå¿«é¤åº—äº§å“ç³»åˆ—ï¼‰
4. **å»ºé€ è€…æ¨¡å¼**ï¼šåˆ†æ­¥æ„å»ºå¤æ‚å¯¹è±¡ï¼ˆæ±½è½¦ç»„è£…ï¼‰

### ç»“æ„å‹æ¨¡å¼ï¼ˆ4ç§ï¼‰

5. **é€‚é…å™¨æ¨¡å¼**ï¼šæ¥å£è½¬æ¢ï¼ˆå›¾å½¢ç³»ç»Ÿå…¼å®¹ï¼‰
6. **æ¡¥æ¥æ¨¡å¼**ï¼šæŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼ˆå’–å•¡ç»„åˆï¼‰
7. **è£…é¥°æ¨¡å¼**ï¼šåŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼ˆå–œç¾Šç¾Šå¢å¼ºï¼‰
8. **å¤–è§‚æ¨¡å¼**ï¼šç®€åŒ–å¤æ‚ç³»ç»Ÿï¼ˆä¿å®‰ç³»ç»Ÿæ§åˆ¶ï¼‰

### è¡Œä¸ºå‹æ¨¡å¼ï¼ˆ2ç§ï¼‰

9. **è§‚å¯Ÿè€…æ¨¡å¼**ï¼šä¸€å¯¹å¤šé€šçŸ¥æœºåˆ¶ï¼ˆå•†å“å˜æ›´é€šçŸ¥ï¼‰
10. **ç­–ç•¥æ¨¡å¼**ï¼šç®—æ³•æ—å°è£…ï¼ˆå›¾ä¹¦æŠ˜æ‰£è®¡ç®—ï¼‰

---

## è®¾è®¡æ¨¡å¼æ ¸å¿ƒåŸåˆ™

æ‰€æœ‰è®¾è®¡æ¨¡å¼éƒ½éµå¾ªä»¥ä¸‹åŸºæœ¬åŸåˆ™ï¼š

1. **å•ä¸€èŒè´£åŸåˆ™**ï¼šä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
3. **é‡Œæ°æ›¿æ¢åŸåˆ™**ï¼šå­ç±»å¯ä»¥æ›¿æ¢çˆ¶ç±»
4. **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
5. **æ¥å£éš”ç¦»åŸåˆ™**ï¼šä½¿ç”¨å¤šä¸ªä¸“é—¨æ¥å£
6. **è¿ªç±³ç‰¹æ³•åˆ™**ï¼šæœ€å°‘çŸ¥è¯†åŸåˆ™
7. **ç»„åˆ/èšåˆå¤ç”¨åŸåˆ™**ï¼šä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿

---

## é™„å½•ï¼šUMLç±»å›¾è¯´æ˜

æ¯ä¸ªæ¨¡å¼çš„ UML ç±»å›¾å·²å†…åµŒåœ¨å¯¹åº”ç« èŠ‚ä¸­ï¼Œä½¿ç”¨ PlantUML æ ¼å¼ç¼–å†™ã€‚

**æŸ¥çœ‹æ–¹å¼**ï¼š
1. **VS Code**ï¼šå®‰è£… PlantUML æ‰©å±•å¯ä»¥ç›´æ¥é¢„è§ˆ
2. **åœ¨çº¿å·¥å…·**ï¼šè®¿é—® [PlantUML Online](http://www.plantuml.com/plantuml/) ç²˜è´´ä»£ç æŸ¥çœ‹
3. **åŸå§‹æ–‡ä»¶**ï¼š`src/main/java/DesiginPatternHomework/[æ¨¡å¼åç§°]/UML.puml`

**Markdowné¢„è§ˆè¯´æ˜**ï¼š
- å¦‚æœä½ çš„MarkdownæŸ¥çœ‹å™¨æ”¯æŒPlantUMLï¼Œå›¾è¡¨ä¼šè‡ªåŠ¨æ¸²æŸ“
- å¦‚æœä¸æ”¯æŒï¼Œä½ ä¼šçœ‹åˆ°PlantUMLä»£ç å—ï¼Œå¯ä»¥å¤åˆ¶åˆ°åœ¨çº¿å·¥å…·æŸ¥çœ‹
- GitHubå’ŒæŸäº›ç¼–è¾‘å™¨éœ€è¦é¢å¤–æ’ä»¶æ‰èƒ½æ¸²æŸ“PlantUML

---

